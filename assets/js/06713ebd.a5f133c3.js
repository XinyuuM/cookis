"use strict";(globalThis.webpackChunkclassic=globalThis.webpackChunkclassic||[]).push([[1295],{69270:(e,s,a)=>{a.r(s),a.d(s,{default:()=>W});var t=a(96540),n=a(76182);const l="clockContainer_odYE",r="clockCard_kkA8",c="clockHeader_EQj4",i="titleGroup_Ip76",o="clockTitle_odME",m="statusIndicator_AgOr",u="online_tDPd",d="offline_YUTK",h="toggleButton_tgvB",p="timeDisplay_Mj_X",N="timeMain_YnjW",j="timeDigits_pkdg",x="timeSeparator_IneG",g="timePeriod_s3g_",v="dateDisplay_YTAF",f="timezoneSection_rVro",T="timezoneLabel_tb75",w="timezoneSelect_MzfI",S="timezoneInfo_tA98",_="statusSection_UhwP",I="syncStatus_Rp_V",b="syncInfo_nqmN",A="syncLabel_WTLR",C="syncValue_Tx71",D="countdown_WLKV",y="loadingIndicator_TUcN",k="spinner_qZEb",P="errorMessage_i8e3",$="successMessage_M8FO",z="clockFooter_OU_O",E="infoGrid_Mtog",F="infoItem_ix1T",M="infoLabel_lVf6",U="infoValue_tiKa";var R=a(74848);const G=[{name:"WorldTimeAPI (Shanghai)",url:"https://worldtimeapi.org/api/timezone/Asia/Shanghai",parseFunction:e=>new Date(e.utc_datetime||e.datetime)},{name:"WorldTimeAPI (IP)",url:"https://worldtimeapi.org/api/ip",parseFunction:e=>new Date(e.utc_datetime||e.datetime)},{name:"WorldTimeAPI (UTC)",url:"https://worldtimeapi.org/api/timezone/Etc/UTC",parseFunction:e=>new Date(e.utc_datetime||e.datetime)},{name:"Google Time API",url:"https://timeapi.io/api/Time/current/zone?timeZone=UTC",parseFunction:e=>new Date(e.dateTime)},{name:"NIST Time API",url:"https://timeapi.io/api/Time/current/zone?timeZone=UTC",parseFunction:e=>new Date(e.dateTime)},{name:"Time.is API",url:"https://time.is/json",parseFunction:e=>new Date(1e3*e.timestamp)},{name:"Mozilla Observatory",url:"https://observatory.mozilla.org/common/date",parseFunction:e=>new Date(e.date)}],L=3e5,O=({showTimezoneSelector:e=!0,showDate:s=!0,showSeconds:n=!0,autoSwitch:O=!0,primaryColor:V,secondaryColor:W})=>{const[Z,K]=(0,t.useState)(new Date),[Y,H]=(0,t.useState)(!1),[q,B]=(0,t.useState)(!0),[J,Q]=(0,t.useState)(null),[X,ee]=(0,t.useState)("Asia/Shanghai"),[se,ae]=(0,t.useState)(null),[te,ne]=(0,t.useState)(null),[le,re]=(0,t.useState)(300),[ce,ie]=(0,t.useState)(0),[oe,me]=(0,t.useState)(0),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(G[0]),[Ne,je]=(0,t.useState)(0),xe=(0,t.useRef)(null),ge=(0,t.useRef)(null),ve=(0,t.useRef)(null),fe=(0,t.useRef)(null),Te=(0,t.useRef)(null),we=(0,t.useRef)(null),Se=(0,t.useRef)(Date.now()),_e=(0,t.useCallback)(()=>{we.current&&(we.current.abort(),we.current=null),fe.current&&(clearTimeout(fe.current),fe.current=null)},[]),Ie=(0,t.useCallback)(e=>{_e(),console.log("\u5b89\u639210\u79d2\u540e\u91cd\u8bd5..."),fe.current=setTimeout(()=>{q&&(console.log("\u6267\u884c\u91cd\u8bd5..."),e())},1e4)},[q,_e]),be=(0,t.useCallback)(async()=>{if(!q)return G[0];console.log("\u5f00\u59cb\u6d4b\u8bd5API\u5ef6\u8fdf...");const e=[];for(const a of G)try{const s=Date.now(),t=new AbortController,n=setTimeout(()=>t.abort(),5e3),l=await fetch(a.url,{method:"GET",mode:"cors",cache:"no-cache",signal:t.signal,headers:{Accept:"application/json"}});clearTimeout(n);const r=Date.now()-s;l.ok&&(e.push({provider:a,latency:r,success:!0}),console.log(`${a.name}: ${r}ms`))}catch(s){console.warn(`${a.name} \u6d4b\u8bd5\u5931\u8d25:`,s.message)}if(e.length>0){e.sort((e,s)=>e.latency-s.latency);const s=e[0].provider,a=e[0].latency;return console.log(`\u9009\u62e9\u6700\u4f73API: ${s.name}, \u5ef6\u8fdf: ${a}ms`),pe(s),je(a),s}return console.warn("\u6240\u6709API\u6d4b\u8bd5\u5931\u8d25\uff0c\u4f7f\u7528\u9ed8\u8ba4API"),G[0]},[q]),Ae=(0,t.useCallback)(async(e=!1)=>{if(!q)return null;e?console.log(`\u7b2c ${oe+1} \u6b21\u91cd\u8bd5\u83b7\u53d6\u7f51\u7edc\u65f6\u95f4...`):(H(!0),Q(null));const s=Date.now(),a=new AbortController;we.current=a;const t=setTimeout(()=>{a.abort(),console.log("\u8bf7\u6c42\u8d85\u65f6\uff0810\u79d2\uff09")},1e4);try{const e=he,s=Date.now();console.log(`\u4ece ${e.name} \u83b7\u53d6\u65f6\u95f4...`);const t=await fetch(e.url,{method:"GET",mode:"cors",cache:"no-cache",signal:a.signal,headers:{Accept:"application/json"}}),n=Date.now()-s;if(!t.ok)throw new Error(`\u54cd\u5e94\u72b6\u6001: ${t.status}`);const l=await t.json();console.log(`${e.name} \u8fd4\u56de\u7684\u6570\u636e:`,l);const r=e.parseFunction(l);if(!r||isNaN(r.getTime()))throw new Error("\u65f6\u95f4\u89e3\u6790\u5931\u8d25");const c=new Date(r.getTime()+n/2);console.log("\u83b7\u53d6\u5230\u7f51\u7edc\u65f6\u95f4:",c.toISOString()),console.log("\u5f80\u8fd4\u5ef6\u8fdf:",n,"ms"),console.log("\u6570\u636e\u6e90:",e.name),ae(c),je(n);const i=new Date;return ne(i),Te.current=i.getTime(),Se.current=i.getTime(),ie(e=>e+1),me(0),de(!0),J&&J.includes("\u65e0\u6cd5\u8fde\u63a5\u5230\u65f6\u95f4\u670d\u52a1\u5668")&&(Q("\u2705 \u540c\u6b65\u6210\u529f"),setTimeout(()=>Q(null),2e3)),re(300),H(!1),c}catch(n){console.error(`\u4ece ${he.name} \u83b7\u53d6\u65f6\u95f4\u5931\u8d25:`,n.message);const e=await be();e!==he&&(console.log(`\u5207\u6362\u5230\u66f4\u4f18API: ${e.name}`),pe(e));const a=Date.now()-s;console.warn(`API\u8bf7\u6c42\u5931\u8d25\uff0c\u603b\u8017\u65f6: ${a}ms`);return me(oe+1),ue?(Q("\u26a0\ufe0f \u7f51\u7edc\u540c\u6b65\u5931\u8d25\uff0c\u4f7f\u7528\u4e0a\u6b21\u540c\u6b65\u65f6\u95f4"),Ie(()=>Ae(!0))):(Q("\u26a0\ufe0f \u65e0\u6cd5\u8fde\u63a5\u5230\u65f6\u95f4\u670d\u52a1\u5668\uff0810\u79d2\u540e\u91cd\u8bd5\uff09"),Ie(()=>Ae(!0))),H(!1),null}finally{clearTimeout(t),we.current=null}},[q,oe,J,ue,Ie,he,be]),Ce=(0,t.useCallback)(()=>{ge.current&&clearInterval(ge.current),ge.current=setInterval(()=>{re(e=>e<=1?(q&&!Y&&Ae(),300):e-1)},1e3)},[q,Y,Ae]),De=(0,t.useCallback)(()=>{xe.current&&clearInterval(xe.current),q&&(Ae(),xe.current=setInterval(()=>{Y||Ae()},L))},[q,Y,Ae]),ye=(0,t.useCallback)(()=>{if(q&&se){const e=Date.now()-Se.current,s=new Date(se.getTime()+e);K(s)}else K(new Date)},[q,se]);(0,t.useEffect)(()=>(be(),De(),Ce(),ve.current=setInterval(()=>{ye()},1e3),()=>{_e(),xe.current&&clearInterval(xe.current),ge.current&&clearInterval(ge.current),ve.current&&clearInterval(ve.current)}),[De,Ce,ye,_e,be]);const ke=((e,s)=>{if(!e||isNaN(e.getTime()))return{time:"--:--",date:"\u52a0\u8f7d\u4e2d...",period:""};try{const a=new Intl.DateTimeFormat("zh-CN",{timeZone:s,hour12:!1,hour:"2-digit",minute:"2-digit",second:n?"2-digit":void 0}),t=new Intl.DateTimeFormat("zh-CN",{timeZone:s,weekday:"long",year:"numeric",month:"long",day:"numeric"}),l=a.format(e),r=t.format(e),c=new Intl.DateTimeFormat("zh-CN",{timeZone:s,hour12:!1,hour:"2-digit"}).formatToParts(e).find(e=>"hour"===e.type).value,i=parseInt(c,10);return{time:l,date:r,period:i<12?"\u4e0a\u5348":i<18?"\u4e0b\u5348":"\u665a\u4e0a"}}catch(a){return console.error("\u683c\u5f0f\u5316\u65f6\u95f4\u65f6\u51fa\u9519:",a),{time:"--:--",date:"\u9519\u8bef",period:""}}})(Z,X);return(0,R.jsx)("div",{className:l,children:(0,R.jsxs)("div",{className:r,children:[(0,R.jsxs)("div",{className:c,children:[(0,R.jsxs)("div",{className:i,children:[(0,R.jsx)("h2",{className:o,children:"\u6570\u5b57\u65f6\u949f"}),(0,R.jsxs)("div",{className:`${m} ${q?u:d}`,children:[q?"\u5728\u7ebf\u65f6\u95f4":"\u672c\u5730\u65f6\u95f4",oe>0&&` (\u91cd\u8bd5${oe})`]})]}),(0,R.jsx)("button",{onClick:()=>{const e=!q;B(e),_e(),me(0),e?be().then(e=>{pe(e),Ae(),De(),Ce()}):(xe.current&&clearInterval(xe.current),ge.current&&clearInterval(ge.current),re(0))},className:h,title:q?"\u5207\u6362\u5230\u672c\u5730\u65f6\u95f4":"\u5c1d\u8bd5\u83b7\u53d6\u7f51\u7edc\u65f6\u95f4",disabled:Y,children:Y?"\u23f3":q?"\ud83d\udd04":"\ud83d\udce1"})]}),(0,R.jsxs)("div",{className:p,children:[(0,R.jsxs)("div",{className:N,children:[(0,R.jsx)("span",{className:j,children:ke.time.split(":")[0]}),(0,R.jsx)("span",{className:x,children:":"}),(0,R.jsx)("span",{className:j,children:ke.time.split(":")[1]}),n&&ke.time.split(":")[2]&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{className:x,children:":"}),(0,R.jsx)("span",{className:j,children:ke.time.split(":")[2]})]}),(0,R.jsx)("span",{className:g,children:ke.period})]}),s&&(0,R.jsx)("div",{className:v,children:ke.date})]}),e&&(0,R.jsxs)("div",{className:f,children:[(0,R.jsxs)("label",{className:T,children:["\u65f6\u533a\u9009\u62e9",(0,R.jsx)("select",{value:X,onChange:e=>{ee(e.target.value)},className:w,disabled:Y,children:a(99386).map(e=>(0,R.jsxs)("option",{value:e.value,children:[e.label," (UTC",e.offset,")"]},e.value))})]}),(0,R.jsxs)("div",{className:S,children:["\u5f53\u524d\u65f6\u533a: ",X.replace("_"," ")]})]}),(0,R.jsxs)("div",{className:_,children:[Y&&(0,R.jsxs)("div",{className:y,children:[(0,R.jsx)("div",{className:k}),"\u6b63\u5728\u540c\u6b65\u65f6\u95f4",oe>0&&` (\u7b2c${oe}\u6b21\u91cd\u8bd5)`,"..."]}),J&&(0,R.jsx)("div",{className:`${P} ${J.includes("\u2705")?$:""}`,children:J}),q&&(0,R.jsxs)("div",{className:I,children:[(0,R.jsxs)("div",{className:b,children:[(0,R.jsx)("span",{className:A,children:"\u5f53\u524dAPI:"}),(0,R.jsx)("span",{className:C,children:he.name})]}),(0,R.jsxs)("div",{className:b,children:[(0,R.jsx)("span",{className:A,children:"API\u5ef6\u8fdf:"}),(0,R.jsxs)("span",{className:C,children:[Ne,"ms"]})]}),(0,R.jsxs)("div",{className:b,children:[(0,R.jsx)("span",{className:A,children:"\u4e0b\u6b21\u540c\u6b65:"}),(0,R.jsx)("span",{className:`${C} ${D}`,children:(e=>{const s=Math.floor(e/60),a=Math.floor(e%60);return`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})(le)})]})]}),!q&&(0,R.jsxs)("div",{className:I,children:[(0,R.jsxs)("div",{className:b,children:[(0,R.jsx)("span",{className:A,children:"\u65f6\u95f4\u6a21\u5f0f:"}),(0,R.jsx)("span",{className:C,children:"\u672c\u5730\u7cfb\u7edf\u65f6\u95f4"})]}),(0,R.jsxs)("div",{className:b,children:[(0,R.jsx)("span",{className:A,children:"\u4e0a\u6b21\u540c\u6b65:"}),(0,R.jsx)("span",{className:C,children:te?te.toLocaleTimeString():"\u65e0"})]})]})]}),(0,R.jsx)("div",{className:z,children:(0,R.jsxs)("div",{className:E,children:[(0,R.jsxs)("div",{className:F,children:[(0,R.jsx)("span",{className:M,children:"\u65f6\u95f4\u6e90:"}),(0,R.jsx)("span",{className:U,children:q?he.name:"\u672c\u5730\u7cfb\u7edf\u65f6\u949f"})]}),(0,R.jsxs)("div",{className:F,children:[(0,R.jsx)("span",{className:M,children:"\u8bf7\u6c42\u8d85\u65f6:"}),(0,R.jsx)("span",{className:U,children:"10\u79d2"})]}),(0,R.jsxs)("div",{className:F,children:[(0,R.jsx)("span",{className:M,children:"\u91cd\u8bd5\u7b56\u7565:"}),(0,R.jsx)("span",{className:U,children:q?"\u5931\u8d25\u540e10\u79d2\u91cd\u8bd5":"\u65e0"})]}),q&&(0,R.jsxs)("div",{className:F,children:[(0,R.jsx)("span",{className:M,children:"\u53ef\u7528API:"}),(0,R.jsxs)("span",{className:U,children:[G.length,"\u4e2a"]})]})]})})]})})},V=O;const W=function(){return(0,R.jsx)(n.A,{title:"\u65f6\u949f",description:"\u7cbe\u786e\u7684\u4e92\u8054\u7f51\u65f6\u95f4\u670d\u52a1\uff0c\u652f\u6301\u591a\u65f6\u533a\u5207\u6362",children:(0,R.jsx)("div",{className:"container margin-vert--xl",children:(0,R.jsx)("div",{className:"row",children:(0,R.jsxs)("div",{className:"col col--8 col--offset-2",children:[(0,R.jsx)("header",{className:"text--center margin-bottom--xl"}),(0,R.jsx)(V,{showTimezoneSelector:!0,showDate:!0,showSeconds:!0,autoSwitch:!0}),(0,R.jsx)("div",{className:"margin-top--lg text--center"})]})})})})}},99386:e=>{e.exports=JSON.parse('[{"value":"Asia/Shanghai","label":"\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4 (CST)","offset":"+08:00"},{"value":"Asia/Tokyo","label":"\u65e5\u672c\u65f6\u95f4 (JST)","offset":"+09:00"},{"value":"Asia/Hong_Kong","label":"\u9999\u6e2f\u65f6\u95f4 (HKT)","offset":"+08:00"},{"value":"Asia/Singapore","label":"\u65b0\u52a0\u5761\u65f6\u95f4 (SGT)","offset":"+08:00"},{"value":"America/New_York","label":"\u7f8e\u56fd\u4e1c\u90e8\u65f6\u95f4 (EST)","offset":"-05:00"},{"value":"America/Los_Angeles","label":"\u7f8e\u56fd\u592a\u5e73\u6d0b\u65f6\u95f4 (PST)","offset":"-08:00"},{"value":"Europe/London","label":"\u683c\u6797\u5c3c\u6cbb\u6807\u51c6\u65f6\u95f4 (GMT)","offset":"+00:00"},{"value":"Europe/Paris","label":"\u4e2d\u6b27\u65f6\u95f4 (CET)","offset":"+01:00"},{"value":"Australia/Sydney","label":"\u6fb3\u5927\u5229\u4e9a\u4e1c\u90e8\u65f6\u95f4 (AEST)","offset":"+10:00"},{"value":"UTC","label":"\u534f\u8c03\u4e16\u754c\u65f6 (UTC)","offset":"+00:00"}]')}}]);