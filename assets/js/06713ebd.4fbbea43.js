"use strict";(globalThis.webpackChunkclassic=globalThis.webpackChunkclassic||[]).push([[1295],{69270:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var n=a(76182),i=a(96540);const t={clockContainer:"clockContainer_odYE",clockCard:"clockCard_kkA8",clockHeader:"clockHeader_EQj4",titleGroup:"titleGroup_Ip76",clockTitle:"clockTitle_odME",statusIndicator:"statusIndicator_AgOr",online:"online_tDPd",offline:"offline_YUTK",toggleButton:"toggleButton_tgvB",timeDisplay:"timeDisplay_Mj_X",timeMain:"timeMain_YnjW",timeDigits:"timeDigits_pkdg",timeSeparator:"timeSeparator_IneG",blink:"blink_h4kO",timePeriod:"timePeriod_s3g_",dateDisplay:"dateDisplay_YTAF",timezoneSection:"timezoneSection_rVro",timezoneLabel:"timezoneLabel_tb75",timezoneSelect:"timezoneSelect_MzfI",timezoneInfo:"timezoneInfo_tA98",statusSection:"statusSection_UhwP",loadingIndicator:"loadingIndicator_TUcN",spinner:"spinner_qZEb",spin:"spin_rot6",errorMessage:"errorMessage_i8e3",networkInfo:"networkInfo_Kx7G",clockFooter:"clockFooter_OU_O",infoGrid:"infoGrid_Mtog",infoItem:"infoItem_ix1T",infoLabel:"infoLabel_lVf6",infoValue:"infoValue_tiKa"};var l=a(74848);const o="https://quan.suning.com/getSysTime.do",r=({showTimezoneSelector:e=!0,showDate:s=!0,showSeconds:n=!0,autoSwitch:r=!0,primaryColor:c,secondaryColor:d,compactMode:m=!1})=>{const[u,h]=(0,i.useState)(new Date),[f,p]=(0,i.useState)(!1),[x,N]=(0,i.useState)(!0),[g,j]=(0,i.useState)(null),[v,w]=(0,i.useState)("Asia/Shanghai"),[T,b]=(0,i.useState)(null),[S,I]=(0,i.useState)(null),[_,k]=(0,i.useState)(0),[D,C]=(0,i.useState)(!0);(0,i.useEffect)(()=>{const e=()=>C(!0),s=()=>C(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]);const y=(0,i.useCallback)(async()=>{if(!x||!D)return null;p(!0),j(null);try{const e=Date.now(),s=new AbortController,a=setTimeout(()=>s.abort(),5e3),n=await fetch(o,{method:"GET",mode:"cors",cache:"no-store",headers:{Accept:"application/json",Pragma:"no-cache","Cache-Control":"no-cache"},signal:s.signal});if(clearTimeout(a),!n.ok)throw new Error(`HTTP\u9519\u8bef: ${n.status} ${n.statusText}`);const i=await n.json(),t=Date.now()-e,l=(e=>{if(!e||"object"!=typeof e)throw new Error("\u65e0\u6548\u7684API\u54cd\u5e94\u6570\u636e");if(e.sysTime2){const[s,a]=e.sysTime2.split(" "),[n,i,t]=s.split("-").map(Number),[l,o,r]=a.split(":").map(Number);return new Date(n,i-1,t,l,o,r).getTime()}if(e.sysTime1){const s=e.sysTime1;if(14!==s.length)throw new Error("sysTime1\u683c\u5f0f\u4e0d\u6b63\u786e");const a=parseInt(s.substring(0,4),10),n=parseInt(s.substring(4,6),10)-1,i=parseInt(s.substring(6,8),10),t=parseInt(s.substring(8,10),10),l=parseInt(s.substring(10,12),10),o=parseInt(s.substring(12,14),10);return new Date(a,n,i,t,l,o).getTime()}throw new Error("API\u54cd\u5e94\u4e2d\u672a\u627e\u5230\u65f6\u95f4\u6570\u636e")})(i),r=new Date(l+t/2),c=Math.abs(r.getTime()-Date.now());return c>6e4&&console.warn("\u7f51\u7edc\u65f6\u95f4\u4e0e\u672c\u5730\u65f6\u95f4\u5dee\u5f02\u8f83\u5927:",c,"ms"),b(r),I(new Date),k(0),p(!1),r}catch(e){clearTimeout(timeoutId),console.error("\u83b7\u53d6\u82cf\u5b81\u65f6\u95f4\u5931\u8d25:",e);let s="";return s="AbortError"===e.name?"\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5":D?e.message.includes("Failed to fetch")?"\u65e0\u6cd5\u8fde\u63a5\u5230\u65f6\u95f4\u670d\u52a1\u5668":`\u65f6\u95f4\u540c\u6b65\u5931\u8d25: ${e.message}`:"\u7f51\u7edc\u8fde\u63a5\u5df2\u65ad\u5f00",j(s),k(e=>e+1),_>=2&&r&&(N(!1),j(`${s}\uff0c\u5df2\u81ea\u52a8\u5207\u6362\u5230\u672c\u5730\u65f6\u95f4`)),p(!1),null}},[x,D,_,r]),L=(0,i.useCallback)(async()=>{let e;if(x&&D){e=await y()||new Date}else e=new Date;try{const s=new Date(e.toLocaleString("en-US",{timeZone:v}));h(s)}catch(s){console.error("\u65f6\u533a\u8f6c\u6362\u9519\u8bef:",s),h(e)}},[x,y,v,D]);(0,i.useEffect)(()=>{L();const e=setInterval(()=>{f||L()},1e3);return()=>clearInterval(e)},[L,f]),(0,i.useEffect)(()=>{if(!x||!D)return;const e=setInterval(()=>{f||y()},3e5);return()=>clearInterval(e)},[x,f,y,D]);const A=((e,s)=>{if(!e||!(e instanceof Date)||isNaN(e.getTime()))return{time:"--:--:--",date:"\u52a0\u8f7d\u4e2d...",period:"--",hour24:0};try{const a=e.toLocaleTimeString("zh-CN",{timeZone:s,hour12:!1,hour:"2-digit",minute:"2-digit",second:n?"2-digit":void 0}),i=e.toLocaleDateString("zh-CN",{timeZone:s,weekday:"long",year:"numeric",month:"long",day:"numeric"}),t=new Date(e.toLocaleString("en-US",{timeZone:s})).getHours();let l="";return l=t<6?"\u51cc\u6668":t<12?"\u4e0a\u5348":t<13?"\u4e2d\u5348":t<18?"\u4e0b\u5348":"\u665a\u4e0a",{time:a,date:i,period:l,hour24:t}}catch(a){return console.error("\u65f6\u95f4\u683c\u5f0f\u5316\u9519\u8bef:",a),{time:"\u683c\u5f0f\u9519\u8bef",date:"\u65f6\u533a\u53ef\u80fd\u4e0d\u652f\u6301",period:"--",hour24:0}}})(u,v),E=a(99386),z=()=>{if(!S)return null;return new Date(S.getTime()+3e5).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})};return(0,l.jsx)("div",{className:`${t.clockContainer} ${m?t.compactMode:""}`,children:(0,l.jsxs)("div",{className:t.clockCard,children:[(0,l.jsxs)("div",{className:t.clockHeader,children:[(0,l.jsxs)("div",{className:t.titleGroup,children:[(0,l.jsx)("h3",{className:t.clockTitle,children:"Time is:"}),(0,l.jsx)("div",{className:`${t.statusIndicator} ${x?t.online:t.offline}`,children:x?"\u5728\u7ebf\u540c\u6b65":"\u672c\u5730\u65f6\u949f"}),!D&&(0,l.jsx)("div",{className:t.offlineIndicator,children:"\ud83d\udd34 \u79bb\u7ebf"})]}),(0,l.jsx)("button",{onClick:()=>{const e=!x;N(e),e&&(j(null),y())},className:t.toggleButton,title:x?"\u5207\u6362\u5230\u672c\u5730\u65f6\u95f4":"\u4f7f\u7528\u82cf\u5b81\u7f51\u7edc\u65f6\u95f4",disabled:!D&&x,children:x?"\ud83c\udf10":"\ud83d\udda5\ufe0f"})]}),(0,l.jsxs)("div",{className:t.timeDisplay,children:[(0,l.jsxs)("div",{className:t.timeMain,children:[(0,l.jsx)("span",{className:t.timeDigits,children:A.time.split(":")[0]}),(0,l.jsx)("span",{className:t.timeSeparator,children:":"}),(0,l.jsx)("span",{className:t.timeDigits,children:A.time.split(":")[1]}),n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:t.timeSeparator,children:":"}),(0,l.jsx)("span",{className:t.timeDigits,children:A.time.split(":")[2]||"00"})]}),(0,l.jsx)("span",{className:t.timePeriod,children:A.period})]}),s&&(0,l.jsx)("div",{className:t.dateDisplay,children:A.date})]}),e&&(0,l.jsxs)("div",{className:t.timezoneSection,children:[(0,l.jsxs)("label",{className:t.timezoneLabel,children:["\u65f6\u533a\u9009\u62e9",(0,l.jsx)("select",{value:v,onChange:e=>{w(e.target.value)},className:t.timezoneSelect,disabled:f,children:E.map(e=>(0,l.jsxs)("option",{value:e.value,children:[e.label," (UTC",e.offset,")"]},e.value))})]}),(0,l.jsxs)("div",{className:t.timezoneInfo,children:["\u5f53\u524d\u65f6\u533a: ",v.replace("_"," "),"Asia/Shanghai"!==v&&(0,l.jsx)("span",{className:t.timezoneNote,children:"\uff08\u57fa\u4e8e\u5317\u4eac\u65f6\u95f4\u8f6c\u6362\uff09"})]})]}),(0,l.jsxs)("div",{className:t.statusSection,children:[f&&(0,l.jsxs)("div",{className:t.loadingIndicator,children:[(0,l.jsx)("div",{className:t.spinner}),"\u6b63\u5728\u540c\u6b65\u82cf\u5b81\u65f6\u95f4..."]}),g&&(0,l.jsx)("div",{className:t.errorMessage,children:(0,l.jsxs)("div",{className:t.errorContent,children:[(0,l.jsx)("span",{className:t.errorIcon,children:"\u26a0\ufe0f"}),(0,l.jsx)("span",{className:t.errorText,children:g}),x&&D&&_<3&&(0,l.jsx)("button",{onClick:()=>{j(null),k(0),y()},className:t.retryButton,children:"\u91cd\u8bd5"})]})}),T&&x&&!g&&(0,l.jsxs)("div",{className:t.networkInfo,children:[(0,l.jsxs)("div",{className:t.infoRow,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u6700\u540e\u540c\u6b65:"}),(0,l.jsx)("span",{className:t.infoValue,children:S?S.toLocaleTimeString("zh-CN"):"--"})]}),z()&&(0,l.jsxs)("div",{className:t.infoRow,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u4e0b\u6b21\u540c\u6b65:"}),(0,l.jsx)("span",{className:t.infoValue,children:z()})]}),(0,l.jsxs)("div",{className:t.infoRow,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u6570\u636e\u6e90:"}),(0,l.jsx)("span",{className:t.infoValue,children:"\u82cf\u5b81\u65f6\u95f4API (HTTPS)"})]})]})]}),(0,l.jsxs)("div",{className:t.clockFooter,children:[(0,l.jsxs)("div",{className:t.infoGrid,children:[(0,l.jsxs)("div",{className:t.infoItem,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u65f6\u95f4\u6e90:"}),(0,l.jsx)("span",{className:t.infoValue,children:x?"\u82cf\u5b81HTTPS\u65f6\u95f4API":"\u672c\u5730\u7cfb\u7edf\u65f6\u95f4"})]}),(0,l.jsxs)("div",{className:t.infoItem,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u7f51\u7edc\u72b6\u6001:"}),(0,l.jsx)("span",{className:`${t.infoValue} ${D?t.onlineText:t.offlineText}`,children:D?"\u5728\u7ebf":"\u79bb\u7ebf"})]}),(0,l.jsxs)("div",{className:t.infoItem,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u91cd\u8bd5\u6b21\u6570:"}),(0,l.jsx)("span",{className:t.infoValue,children:_})]}),r&&(0,l.jsxs)("div",{className:t.infoItem,children:[(0,l.jsx)("span",{className:t.infoLabel,children:"\u81ea\u52a8\u5207\u6362:"}),(0,l.jsx)("span",{className:t.infoValue,children:"\u5df2\u542f\u7528"})]})]}),x&&(0,l.jsxs)("div",{className:t.apiInfo,children:["\u4f7f\u7528\u82cf\u5b81\u5b98\u65b9\u65f6\u95f4\u63a5\u53e3:",(0,l.jsx)("code",{className:t.apiUrl,children:o})]})]})]})})},c=r;const d=function(){return(0,l.jsx)(n.A,{title:"\u65f6\u949f",description:"\u7cbe\u786e\u7684\u4e92\u8054\u7f51\u65f6\u95f4\u670d\u52a1\uff0c\u652f\u6301\u591a\u65f6\u533a\u5207\u6362",children:(0,l.jsx)("div",{className:"container margin-vert--xl",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col col--8 col--offset-2",children:[(0,l.jsx)("header",{className:"text--center margin-bottom--xl"}),(0,l.jsx)(c,{showTimezoneSelector:!0,showDate:!0,showSeconds:!0,autoSwitch:!0}),(0,l.jsx)("div",{className:"margin-top--lg text--center"})]})})})})}},99386:e=>{e.exports=JSON.parse('[{"value":"Asia/Shanghai","label":"\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4 (CST)","offset":"+08:00"},{"value":"Asia/Tokyo","label":"\u65e5\u672c\u65f6\u95f4 (JST)","offset":"+09:00"},{"value":"Asia/Hong_Kong","label":"\u9999\u6e2f\u65f6\u95f4 (HKT)","offset":"+08:00"},{"value":"Asia/Singapore","label":"\u65b0\u52a0\u5761\u65f6\u95f4 (SGT)","offset":"+08:00"},{"value":"America/New_York","label":"\u7f8e\u56fd\u4e1c\u90e8\u65f6\u95f4 (EST)","offset":"-05:00"},{"value":"America/Los_Angeles","label":"\u7f8e\u56fd\u592a\u5e73\u6d0b\u65f6\u95f4 (PST)","offset":"-08:00"},{"value":"Europe/London","label":"\u683c\u6797\u5c3c\u6cbb\u6807\u51c6\u65f6\u95f4 (GMT)","offset":"+00:00"},{"value":"Europe/Paris","label":"\u4e2d\u6b27\u65f6\u95f4 (CET)","offset":"+01:00"},{"value":"Australia/Sydney","label":"\u6fb3\u5927\u5229\u4e9a\u4e1c\u90e8\u65f6\u95f4 (AEST)","offset":"+10:00"},{"value":"UTC","label":"\u534f\u8c03\u4e16\u754c\u65f6 (UTC)","offset":"+00:00"}]')}}]);