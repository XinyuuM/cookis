"use strict";(globalThis.webpackChunkclassic=globalThis.webpackChunkclassic||[]).push([[1295],{69270:(e,s,n)=>{n.r(s),n.d(s,{default:()=>c});var a=n(76182),t=n(96540);const i={clockContainer:"clockContainer_odYE",clockCard:"clockCard_kkA8",clockHeader:"clockHeader_EQj4",titleGroup:"titleGroup_Ip76",clockTitle:"clockTitle_odME",statusIndicator:"statusIndicator_AgOr",online:"online_tDPd",offline:"offline_YUTK",toggleButton:"toggleButton_tgvB",timeDisplay:"timeDisplay_Mj_X",timeMain:"timeMain_YnjW",timeDigits:"timeDigits_pkdg",timeSeparator:"timeSeparator_IneG",blink:"blink_h4kO",timePeriod:"timePeriod_s3g_",dateDisplay:"dateDisplay_YTAF",timezoneSection:"timezoneSection_rVro",timezoneLabel:"timezoneLabel_tb75",timezoneSelect:"timezoneSelect_MzfI",timezoneInfo:"timezoneInfo_tA98",statusSection:"statusSection_UhwP",loadingIndicator:"loadingIndicator_TUcN",spinner:"spinner_qZEb",spin:"spin_rot6",errorMessage:"errorMessage_i8e3",networkInfo:"networkInfo_Kx7G",clockFooter:"clockFooter_OU_O",infoGrid:"infoGrid_Mtog",infoItem:"infoItem_ix1T",infoLabel:"infoLabel_lVf6",infoValue:"infoValue_tiKa"};var o=n(74848);const l=({showTimezoneSelector:e=!0,showDate:s=!0,showSeconds:a=!0,autoSwitch:l=!0,primaryColor:r,secondaryColor:c,compactMode:d=!1})=>{const[m,u]=(0,t.useState)(new Date),[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!0),[x,N]=(0,t.useState)(null),[j,w]=(0,t.useState)("Asia/Shanghai"),[v,T]=(0,t.useState)(null),[b,S]=(0,t.useState)(0),[k,I]=(0,t.useState)(!0),_=(0,t.useRef)({networkTime:null,localReference:null,offset:0});(0,t.useEffect)(()=>{const e=()=>{I(!0),p&&D()},s=()=>{I(!1),N("\u7f51\u7edc\u8fde\u63a5\u5df2\u65ad\u5f00\uff0c\u4f7f\u7528\u672c\u5730\u65f6\u95f4"),g(!1)};return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[p]);const D=(0,t.useCallback)(async()=>{if(!p||!k)return!1;f(!0),N(null);try{const e=Date.now(),s=new AbortController,n=setTimeout(()=>s.abort(),5e3),a=await fetch("https://quan.suning.com/getSysTime.do",{method:"GET",mode:"cors",cache:"no-store",headers:{Accept:"application/json",Pragma:"no-cache","Cache-Control":"no-cache"},signal:s.signal});if(clearTimeout(n),!a.ok)throw new Error(`HTTP\u9519\u8bef: ${a.status} ${a.statusText}`);const t=await a.json(),i=Date.now()-e,o=(e=>{if(!e||"object"!=typeof e)throw new Error("\u65e0\u6548\u7684API\u54cd\u5e94\u6570\u636e");if(e.sysTime2){const[s,n]=e.sysTime2.split(" "),[a,t,i]=s.split("-").map(Number),[o,l,r]=n.split(":").map(Number);return new Date(a,t-1,i,o,l,r).getTime()}if(e.sysTime1){const s=e.sysTime1;if(14!==s.length)throw new Error("sysTime1\u683c\u5f0f\u4e0d\u6b63\u786e");const n=parseInt(s.substring(0,4),10),a=parseInt(s.substring(4,6),10)-1,t=parseInt(s.substring(6,8),10),i=parseInt(s.substring(8,10),10),o=parseInt(s.substring(10,12),10),l=parseInt(s.substring(12,14),10);return new Date(n,a,t,i,o,l).getTime()}throw new Error("API\u54cd\u5e94\u4e2d\u672a\u627e\u5230\u65f6\u95f4\u6570\u636e")})(t),l=o+i/2,r=new Date(l),c=Math.abs(r.getTime()-Date.now());return c>6e4&&console.warn("\u7f51\u7edc\u65f6\u95f4\u4e0e\u672c\u5730\u65f6\u95f4\u5dee\u5f02\u8f83\u5927:",c,"ms"),_.current={networkTime:r,localReference:Date.now(),offset:l-Date.now()},T(new Date),S(0),f(!1),!0}catch(e){clearTimeout(timeoutId),console.error("\u83b7\u53d6\u82cf\u5b81\u65f6\u95f4\u5931\u8d25:",e);let s="";return s="AbortError"===e.name?"\u8bf7\u6c42\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5":k?e.message.includes("Failed to fetch")?"\u65e0\u6cd5\u8fde\u63a5\u5230\u65f6\u95f4\u670d\u52a1\u5668":`\u65f6\u95f4\u540c\u6b65\u5931\u8d25: ${e.message}`:"\u7f51\u7edc\u8fde\u63a5\u5df2\u65ad\u5f00",N(s),S(e=>e+1),b>=2&&l&&(g(!1),N(`${s}\uff0c\u5df2\u81ea\u52a8\u5207\u6362\u5230\u672c\u5730\u65f6\u95f4`)),f(!1),!1}},[p,k,b,l]),y=(0,t.useCallback)(()=>{let e;if(p&&_.current.networkTime&&_.current.localReference){const s=Date.now()-_.current.localReference;e=new Date(_.current.networkTime.getTime()+s)}else e=new Date;try{const s=new Intl.DateTimeFormat("en-US",{timeZone:j,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(e),n=e=>s.find(s=>s.type===e)?.value,a=n("year"),t=n("month"),i=n("day"),o=n("hour"),l=n("minute"),r=n("second"),c=new Date(`${a}-${t}-${i}T${o}:${l}:${r}`);u(c)}catch(s){console.error("\u65f6\u533a\u8f6c\u6362\u9519\u8bef:",s),u(e)}},[p,j]);(0,t.useEffect)(()=>{p&&k?D():_.current={networkTime:new Date,localReference:Date.now(),offset:0};const e=setInterval(()=>{y()},1e3);return()=>clearInterval(e)},[p,k,y]),(0,t.useEffect)(()=>{if(!p||!k)return;const e=setInterval(()=>{h||D()},3e5);return()=>clearInterval(e)},[p,h,D,k]);const C=((e,s)=>{if(!e||!(e instanceof Date)||isNaN(e.getTime()))return{time:"--:--:--",date:"\u52a0\u8f7d\u4e2d...",period:"--",hour24:0};try{const n={timeZone:s,hour12:!1,hour:"2-digit",minute:"2-digit"};a&&(n.second="2-digit");const t=e.toLocaleTimeString("zh-CN",n),i=e.toLocaleDateString("zh-CN",{timeZone:s,weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=new Date(e.toLocaleString("en-US",{timeZone:s})).getHours();let l="";return l=o<6?"\u51cc\u6668":o<12?"\u4e0a\u5348":o<13?"\u4e2d\u5348":o<18?"\u4e0b\u5348":"\u665a\u4e0a",{time:t,date:i,period:l,hour24:o}}catch(n){return console.error("\u65f6\u95f4\u683c\u5f0f\u5316\u9519\u8bef:",n),{time:"\u683c\u5f0f\u9519\u8bef",date:"\u65f6\u533a\u53ef\u80fd\u4e0d\u652f\u6301",period:"--",hour24:0}}})(m,j),L=n(99386),A=()=>{if(!v)return null;return new Date(v.getTime()+3e5).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})};return(0,o.jsx)("div",{className:`${i.clockContainer} ${d?i.compactMode:""}`,children:(0,o.jsxs)("div",{className:i.clockCard,children:[(0,o.jsxs)("div",{className:i.clockHeader,children:[(0,o.jsxs)("div",{className:i.titleGroup,children:[(0,o.jsx)("h2",{className:i.clockTitle,children:"Time is:"}),(0,o.jsx)("div",{className:`${i.statusIndicator} ${p?i.online:i.offline}`,children:p?"\u5728\u7ebf\u540c\u6b65":"\u672c\u5730\u65f6\u949f"}),!k&&(0,o.jsx)("div",{className:i.offlineIndicator,children:"\ud83d\udd34 \u79bb\u7ebf"})]}),(0,o.jsx)("button",{onClick:()=>{const e=!p;g(e),e&&k?(N(null),D()):_.current={networkTime:new Date,localReference:Date.now(),offset:0}},className:i.toggleButton,title:p?"\u5207\u6362\u5230\u672c\u5730\u65f6\u95f4":"\u4f7f\u7528\u7f51\u7edc\u65f6\u95f4\u540c\u6b65",disabled:!k&&p,children:p?"\ud83c\udf10":"\ud83d\udda5\ufe0f"})]}),(0,o.jsxs)("div",{className:i.timeDisplay,children:[(0,o.jsxs)("div",{className:i.timeMain,children:[(0,o.jsx)("span",{className:i.timeDigits,children:C.time.split(":")[0]||"--"}),(0,o.jsx)("span",{className:i.timeSeparator,children:":"}),(0,o.jsx)("span",{className:i.timeDigits,children:C.time.split(":")[1]||"--"}),a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:i.timeSeparator,children:":"}),(0,o.jsx)("span",{className:i.timeDigits,children:C.time.split(":")[2]||"--"})]}),(0,o.jsx)("span",{className:i.timePeriod,children:C.period})]}),s&&(0,o.jsx)("div",{className:i.dateDisplay,children:C.date})]}),e&&(0,o.jsxs)("div",{className:i.timezoneSection,children:[(0,o.jsxs)("label",{className:i.timezoneLabel,children:["\u65f6\u533a\u9009\u62e9",(0,o.jsx)("select",{value:j,onChange:e=>{w(e.target.value)},className:i.timezoneSelect,disabled:h,children:L.map(e=>(0,o.jsxs)("option",{value:e.value,children:[e.label," (UTC",e.offset,")"]},e.value))})]}),(0,o.jsxs)("div",{className:i.timezoneInfo,children:["\u5f53\u524d\u65f6\u533a: ",j.replace("_"," "),"Asia/Shanghai"!==j&&(0,o.jsx)("span",{className:i.timezoneNote,children:"\uff08\u57fa\u4e8e\u5317\u4eac\u65f6\u95f4\u8f6c\u6362\uff09"})]})]}),(0,o.jsxs)("div",{className:i.statusSection,children:[h&&(0,o.jsxs)("div",{className:i.loadingIndicator,children:[(0,o.jsx)("div",{className:i.spinner}),"\u6b63\u5728\u540c\u6b65\u65f6\u95f4..."]}),x&&(0,o.jsx)("div",{className:i.errorMessage,children:(0,o.jsxs)("div",{className:i.errorContent,children:[(0,o.jsx)("span",{className:i.errorIcon,children:"\u26a0\ufe0f"}),(0,o.jsx)("span",{className:i.errorText,children:x}),p&&k&&b<3&&(0,o.jsx)("button",{onClick:()=>{N(null),S(0),D()},className:i.retryButton,children:"\u91cd\u8bd5"})]})}),p&&!x&&!h&&(0,o.jsxs)("div",{className:i.networkInfo,children:[(0,o.jsxs)("div",{className:i.infoRow,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u540c\u6b65\u65b9\u5f0f:"}),(0,o.jsx)("span",{className:i.infoValue,children:"\u57fa\u51c6\u65f6\u95f4 + \u672c\u5730\u8ba1\u65f6"})]}),v&&(0,o.jsxs)("div",{className:i.infoRow,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u6700\u540e\u540c\u6b65:"}),(0,o.jsx)("span",{className:i.infoValue,children:v.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),A()&&(0,o.jsxs)("div",{className:i.infoRow,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u4e0b\u6b21\u540c\u6b65:"}),(0,o.jsx)("span",{className:i.infoValue,children:A()})]}),(0,o.jsxs)("div",{className:i.infoRow,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u65f6\u95f4\u504f\u79fb:"}),(0,o.jsx)("span",{className:i.infoValue,children:(()=>{const e=_.current.offset;return Math.abs(e)<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`})()})]})]})]}),(0,o.jsx)("div",{className:i.clockFooter,children:(0,o.jsxs)("div",{className:i.infoGrid,children:[(0,o.jsxs)("div",{className:i.infoItem,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u65f6\u95f4\u6e90:"}),(0,o.jsx)("span",{className:i.infoValue,children:p?"\u82cf\u5b81\u65f6\u95f4API":"\u672c\u5730\u7cfb\u7edf\u65f6\u95f4"})]}),(0,o.jsxs)("div",{className:i.infoItem,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u7f51\u7edc\u72b6\u6001:"}),(0,o.jsx)("span",{className:`${i.infoValue} ${k?i.onlineText:i.offlineText}`,children:k?"\u5728\u7ebf":"\u79bb\u7ebf"})]}),(0,o.jsxs)("div",{className:i.infoItem,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u91cd\u8bd5\u6b21\u6570:"}),(0,o.jsx)("span",{className:i.infoValue,children:b})]}),l&&(0,o.jsxs)("div",{className:i.infoItem,children:[(0,o.jsx)("span",{className:i.infoLabel,children:"\u81ea\u52a8\u5207\u6362:"}),(0,o.jsx)("span",{className:i.infoValue,children:"\u5df2\u542f\u7528"})]})]})})]})})},r=l;const c=function(){return(0,o.jsx)(a.A,{title:"\u65f6\u949f",description:"\u7cbe\u786e\u7684\u4e92\u8054\u7f51\u65f6\u95f4\u670d\u52a1\uff0c\u652f\u6301\u591a\u65f6\u533a\u5207\u6362",children:(0,o.jsx)("div",{className:"container margin-vert--xl",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsxs)("div",{className:"col col--8 col--offset-2",children:[(0,o.jsx)("header",{className:"text--center margin-bottom--xl"}),(0,o.jsx)(r,{showTimezoneSelector:!0,showDate:!0,showSeconds:!0,autoSwitch:!0}),(0,o.jsx)("div",{className:"margin-top--lg text--center"})]})})})})}},99386:e=>{e.exports=JSON.parse('[{"value":"Asia/Shanghai","label":"\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4 (CST)","offset":"+08:00"},{"value":"Asia/Tokyo","label":"\u65e5\u672c\u65f6\u95f4 (JST)","offset":"+09:00"},{"value":"Asia/Hong_Kong","label":"\u9999\u6e2f\u65f6\u95f4 (HKT)","offset":"+08:00"},{"value":"Asia/Singapore","label":"\u65b0\u52a0\u5761\u65f6\u95f4 (SGT)","offset":"+08:00"},{"value":"America/New_York","label":"\u7f8e\u56fd\u4e1c\u90e8\u65f6\u95f4 (EST)","offset":"-05:00"},{"value":"America/Los_Angeles","label":"\u7f8e\u56fd\u592a\u5e73\u6d0b\u65f6\u95f4 (PST)","offset":"-08:00"},{"value":"Europe/London","label":"\u683c\u6797\u5c3c\u6cbb\u6807\u51c6\u65f6\u95f4 (GMT)","offset":"+00:00"},{"value":"Europe/Paris","label":"\u4e2d\u6b27\u65f6\u95f4 (CET)","offset":"+01:00"},{"value":"Australia/Sydney","label":"\u6fb3\u5927\u5229\u4e9a\u4e1c\u90e8\u65f6\u95f4 (AEST)","offset":"+10:00"},{"value":"UTC","label":"\u534f\u8c03\u4e16\u754c\u65f6 (UTC)","offset":"+00:00"}]')}}]);