"use strict";(globalThis.webpackChunkclassic=globalThis.webpackChunkclassic||[]).push([[2704],{96357:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var i=a(96540),l=a(76182),t=a(95293);const n={container:"container_KMqW",header:"header_V8u7",title:"title_uacf",subtitle:"subtitle_QOma",uploadArea:"uploadArea_vHJS",dropzone:"dropzone_FHO0",fileInput:"fileInput_gfYy",uploadLabel:"uploadLabel_A8xx",uploadIcon:"uploadIcon_BRnL",uploadText:"uploadText_FV0o",uploadHint:"uploadHint_eTz0",content:"content_loQN",previewContainer:"previewContainer_BIMz",previewHeader:"previewHeader_BSaE",previewTitle:"previewTitle_h9UT",fileName:"fileName_yIoe",imageGrid:"imageGrid_Tbba",imageColumn:"imageColumn_y9nM",imageWrapper:"imageWrapper_iFzG",image:"image_DtRI",placeholder:"placeholder_tq4A",separator:"separator_HLcC",arrow:"arrow_Olyj",imageInfo:"imageInfo_yfCw",infoLabel:"infoLabel_nPvA",infoValue:"infoValue_o_qn",ratio:"ratio_cLAI",stats:"stats_oiYT",statItem:"statItem_j0X0",statLabel:"statLabel_VsSC",statValue:"statValue_mQka",controlsContainer:"controlsContainer_scZ1",controlsTitle:"controlsTitle_sEc8",sectionTitle:"sectionTitle_WYW5",presetGrid:"presetGrid_y1_c",presetButton:"presetButton_UXwK",presetActive:"presetActive_Braf",presetName:"presetName_pU6I",presetDesc:"presetDesc_UIF6",settings:"settings_QW6G",settingGroup:"settingGroup_RlT4",settingLabel:"settingLabel_WBX2",slider:"slider_rDWr",sliderLabels:"sliderLabels_t9sN",select:"select_IByq",compressButton:"compressButton_IrZt",compressButtonLoading:"compressButtonLoading_px3K",spinner:"spinner_gup5",spin:"spin_RvM9",tips:"tips__elh",tipList:"tipList_U8YE",downloadContainer:"downloadContainer_iPv6",downloadInfo:"downloadInfo_Bxa3",infoRow:"infoRow_YGpC",ratioBadge:"ratioBadge_omvG",sizeInfo:"sizeInfo_ZP_q",downloadButton:"downloadButton_a7TQ",downloadIcon:"downloadIcon_EG4X",error:"error_MwEJ"};var r=a(74848);const o=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB"][s]},c=({originalImage:e,compressedImage:s,originalSize:a,compressedSize:i,compressionRatio:l,fileName:t})=>(0,r.jsxs)("div",{className:n.previewContainer,children:[(0,r.jsxs)("div",{className:n.previewHeader,children:[(0,r.jsx)("h3",{className:n.previewTitle,children:"\u56fe\u7247\u9884\u89c8"}),t&&(0,r.jsx)("span",{className:n.fileName,children:t})]}),(0,r.jsxs)("div",{className:n.imageGrid,children:[(0,r.jsxs)("div",{className:n.imageColumn,children:[(0,r.jsx)("div",{className:n.imageWrapper,children:e?(0,r.jsx)("img",{src:e,alt:"\u539f\u59cb\u56fe\u7247",className:n.image}):(0,r.jsx)("div",{className:n.placeholder,children:(0,r.jsx)("span",{children:"\u539f\u59cb\u56fe\u7247"})})}),(0,r.jsxs)("div",{className:n.imageInfo,children:[(0,r.jsx)("span",{className:n.infoLabel,children:"\u539f\u59cb\u5927\u5c0f\uff1a"}),(0,r.jsx)("span",{className:n.infoValue,children:a?o(a):"--"})]})]}),(0,r.jsx)("div",{className:n.separator,children:(0,r.jsx)("div",{className:n.arrow,children:"\u2192"})}),(0,r.jsxs)("div",{className:n.imageColumn,children:[(0,r.jsx)("div",{className:n.imageWrapper,children:s?(0,r.jsx)("img",{src:s,alt:"\u538b\u7f29\u540e\u56fe\u7247",className:n.image}):(0,r.jsx)("div",{className:n.placeholder,children:(0,r.jsx)("span",{children:"\u538b\u7f29\u540e\u56fe\u7247"})})}),(0,r.jsxs)("div",{className:n.imageInfo,children:[(0,r.jsx)("span",{className:n.infoLabel,children:"\u538b\u7f29\u540e\uff1a"}),(0,r.jsx)("span",{className:n.infoValue,children:i?o(i):"--"}),l>0&&(0,r.jsxs)("span",{className:n.ratio,children:["\uff08\u51cf\u5c11 ",l,"%\uff09"]})]})]})]}),l>0&&(0,r.jsxs)("div",{className:n.stats,children:[(0,r.jsxs)("div",{className:n.statItem,children:[(0,r.jsx)("span",{className:n.statLabel,children:"\u538b\u7f29\u7387"}),(0,r.jsxs)("span",{className:n.statValue,children:[l,"%"]})]}),(0,r.jsxs)("div",{className:n.statItem,children:[(0,r.jsx)("span",{className:n.statLabel,children:"\u8282\u7701\u7a7a\u95f4"}),(0,r.jsx)("span",{className:n.statValue,children:o(a-i)})]})]})]}),d=[{id:"web",name:"\u7f51\u9875\u4f18\u5316",description:"\u9002\u5408\u7f51\u9875\u4f7f\u7528\uff0c\u5e73\u8861\u8d28\u91cf\u548c\u5927\u5c0f",quality:80,maxWidth:1920,format:"image/webp"},{id:"social",name:"\u793e\u4ea4\u5a92\u4f53",description:"\u9002\u5408\u793e\u4ea4\u5a92\u4f53\u5206\u4eab",quality:85,maxWidth:1080,format:"image/jpeg"},{id:"mobile",name:"\u79fb\u52a8\u7aef\u4f18\u5316",description:"\u9002\u5408\u79fb\u52a8\u8bbe\u5907\u52a0\u8f7d",quality:75,maxWidth:750,format:"image/jpeg"},{id:"archive",name:"\u9ad8\u8d28\u91cf\u5b58\u6863",description:"\u4fdd\u7559\u6700\u9ad8\u8d28\u91cf",quality:95,maxWidth:3840,format:"image/png"},{id:"email",name:"\u90ae\u4ef6\u9644\u4ef6",description:"\u9002\u5408\u90ae\u4ef6\u53d1\u9001\uff0c\u6587\u4ef6\u5c0f",quality:70,maxWidth:1024,format:"image/jpeg"}],m=({onCompress:e,isProcessing:s})=>{const[a,l]=(0,i.useState)(80),[t,o]=(0,i.useState)(1920),[c,m]=(0,i.useState)("image/jpeg"),[p,h]=(0,i.useState)("web");return(0,r.jsxs)("div",{className:n.controlsContainer,children:[(0,r.jsx)("h3",{className:n.controlsTitle,children:"\u538b\u7f29\u8bbe\u7f6e"}),(0,r.jsxs)("div",{className:n.presets,children:[(0,r.jsx)("h4",{className:n.sectionTitle,children:"\u9884\u8bbe"}),(0,r.jsx)("div",{className:n.presetGrid,children:d.map(e=>(0,r.jsxs)("button",{className:`${n.presetButton} ${p===e.id?n.presetActive:""}`,onClick:()=>(e=>{const s=d.find(s=>s.id===e);s&&(l(s.quality),o(s.maxWidth),m(s.format),h(e))})(e.id),children:[(0,r.jsx)("span",{className:n.presetName,children:e.name}),(0,r.jsx)("span",{className:n.presetDesc,children:e.description})]},e.id))})]}),(0,r.jsxs)("div",{className:n.settings,children:[(0,r.jsxs)("div",{className:n.settingGroup,children:[(0,r.jsxs)("label",{className:n.settingLabel,children:["\u56fe\u7247\u8d28\u91cf\uff1a",a,"%",(0,r.jsx)("input",{type:"range",min:"10",max:"100",value:a,onChange:e=>l(parseInt(e.target.value)),className:n.slider})]}),(0,r.jsxs)("div",{className:n.sliderLabels,children:[(0,r.jsx)("span",{children:"\u4f4e"}),(0,r.jsx)("span",{children:"\u9ad8"})]})]}),(0,r.jsxs)("div",{className:n.settingGroup,children:[(0,r.jsxs)("label",{className:n.settingLabel,children:["\u6700\u5927\u5bbd\u5ea6\uff1a",t,"px",(0,r.jsx)("input",{type:"range",min:"320",max:"3840",step:"160",value:t,onChange:e=>o(parseInt(e.target.value)),className:n.slider})]}),(0,r.jsxs)("div",{className:n.sliderLabels,children:[(0,r.jsx)("span",{children:"320px"}),(0,r.jsx)("span",{children:"3840px"})]})]}),(0,r.jsx)("div",{className:n.settingGroup,children:(0,r.jsxs)("label",{className:n.settingLabel,children:["\u8f93\u51fa\u683c\u5f0f",(0,r.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:n.select,children:[(0,r.jsx)("option",{value:"image/jpeg",children:"JPEG"}),(0,r.jsx)("option",{value:"image/png",children:"PNG"}),(0,r.jsx)("option",{value:"image/webp",children:"WebP"})]})]})})]}),(0,r.jsx)("button",{onClick:()=>{e({quality:a,maxWidth:t,format:c})},disabled:s,className:`${n.compressButton} ${s?n.compressButtonLoading:""}`,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:n.spinner}),"\u5904\u7406\u4e2d..."]}):"\u5f00\u59cb\u538b\u7f29"}),(0,r.jsxs)("div",{className:n.tips,children:[(0,r.jsx)("h4",{className:n.sectionTitle,children:"\u4f7f\u7528\u5efa\u8bae"}),(0,r.jsxs)("ul",{className:n.tipList,children:[(0,r.jsx)("li",{children:"WebP\u683c\u5f0f\u538b\u7f29\u7387\u6700\u9ad8\uff0cChrome/Firefox/Edge\u6d4f\u89c8\u5668\u652f\u6301"}),(0,r.jsx)("li",{children:"PNG\u683c\u5f0f\u9002\u5408\u9700\u8981\u900f\u660e\u80cc\u666f\u7684\u56fe\u7247"}),(0,r.jsx)("li",{children:"JPEG\u683c\u5f0f\u517c\u5bb9\u6027\u6700\u597d\uff0c\u9002\u5408\u7167\u7247\u7c7b\u56fe\u7247"}),(0,r.jsx)("li",{children:"\u5efa\u8bae\u5148\u538b\u7f29\u518d\u4e0a\u4f20\u5230\u7f51\u7ad9\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u52a0\u8f7d\u901f\u5ea6"})]})]})]})},p=({compressedImage:e,fileName:s,compressedSize:a,originalSize:i,compressionRatio:l})=>(0,r.jsxs)("div",{className:n.downloadContainer,children:[(0,r.jsxs)("div",{className:n.downloadInfo,children:[(0,r.jsxs)("div",{className:n.infoRow,children:[(0,r.jsx)("span",{children:"\u538b\u7f29\u5b8c\u6210\uff01"}),(0,r.jsxs)("span",{className:n.ratioBadge,children:["\u8282\u7701 ",l,"%"]})]}),(0,r.jsx)("div",{className:n.infoRow,children:(0,r.jsxs)("span",{className:n.sizeInfo,children:["\u539f\u59cb: ",(i/1024).toFixed(1),"KB \u2192 \u538b\u7f29\u540e: ",(a/1024).toFixed(1),"KB"]})})]}),(0,r.jsxs)("button",{onClick:()=>{const a=document.createElement("a");a.href=e;const i=e.split(";")[0].split("/")[1],l=s.split(".")[0];a.download=`${l}_compressed.${i}`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:n.downloadButton,children:[(0,r.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",className:n.downloadIcon,children:(0,r.jsx)("path",{fill:"currentColor",d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"\u4e0b\u8f7d\u56fe\u7247"]})]}),h=()=>{const[e,s]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[o,d]=(0,i.useState)(0),[h,x]=(0,i.useState)(0),[u,g]=(0,i.useState)(0),[j,N]=(0,i.useState)(!1),[v,f]=(0,i.useState)(""),[_,w]=(0,i.useState)(""),{colorMode:b}=(0,t.G)(),I=(0,i.useRef)(null),C=(0,i.useCallback)(async(e,s,a,i)=>new Promise((l,t)=>{const n=new FileReader;n.onload=e=>{const n=new Image;n.onload=()=>{const e=I.current||document.createElement("canvas");let r=n.width,o=n.height;a&&r>a&&(o=o*a/r,r=a),e.width=r,e.height=o;e.getContext("2d").drawImage(n,0,0,r,o),e.toBlob(e=>{e?l({blob:e,width:r,height:o,url:URL.createObjectURL(e)}):t(new Error("\u538b\u7f29\u5931\u8d25"))},i||"image/jpeg",s)},n.onerror=t,n.src=e.target.result},n.onerror=t,n.readAsDataURL(e)}),[]),y=async e=>{const a=e.target.files?.[0];if(!a)return;if(!a.type.startsWith("image/"))return void w("\u8bf7\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6");w(""),f(a.name),d(a.size);const i=new FileReader;i.onload=e=>{s(e.target.result)},i.readAsDataURL(a)},L=e=>{const s=e.split(","),a=s[0].match(/:(.*?);/)[1],i=atob(s[1]);let l=i.length;const t=new Uint8Array(l);for(;l--;)t[l]=i.charCodeAt(l);return new Blob([t],{type:a})};return(0,r.jsxs)("div",{className:`${n.container} ${n[b]}`,children:[(0,r.jsxs)("div",{className:n.header,children:[(0,r.jsx)("h2",{className:n.title,children:"\u56fe\u7247\u538b\u7f29"}),(0,r.jsx)("p",{className:n.subtitle,children:"\u672c\u5730\u5904\u7406\uff0c\u5b89\u5168\u5feb\u901f"})]}),_&&(0,r.jsx)("div",{className:n.error,children:_}),(0,r.jsx)("div",{className:n.uploadArea,children:(0,r.jsxs)("div",{className:n.dropzone,onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();const s=e.dataTransfer.files;if(s&&s[0]){y({target:{files:s}})}},children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:y,className:n.fileInput,id:"image-upload"}),(0,r.jsxs)("label",{htmlFor:"image-upload",className:n.uploadLabel,children:[(0,r.jsx)("div",{className:n.uploadIcon,children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",width:"48",height:"48",children:(0,r.jsx)("path",{fill:"currentColor",d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})})}),(0,r.jsx)("p",{className:n.uploadText,children:"\u62d6\u62fd\u56fe\u7247\u5230\u8fd9\u91cc\uff0c\u6216\u70b9\u51fb\u9009\u62e9\u6587\u4ef6"}),(0,r.jsx)("p",{className:n.uploadHint,children:"\u652f\u6301 JPG, PNG, GIF, WebP \u683c\u5f0f"})]})]})}),(0,r.jsxs)("div",{className:n.content,children:[(0,r.jsx)("div",{className:n.previewSection,children:(0,r.jsx)(c,{originalImage:e,compressedImage:a,originalSize:o,compressedSize:h,compressionRatio:u,fileName:v})}),(0,r.jsxs)("div",{className:n.controlsSection,children:[(0,r.jsx)(m,{onCompress:async s=>{if(e){N(!0);try{document.createElement("input");const a=await new Promise(s=>{const a=L(e);s(new File([a],v,{type:"image/jpeg"}))}),i=await C(a,s.quality/100,s.maxWidth,s.format);l(i.url),x(i.blob.size);const t=(100*(1-i.blob.size/o)).toFixed(1);g(t)}catch(a){w(`\u538b\u7f29\u5931\u8d25: ${a.message}`)}finally{N(!1)}}else w("\u8bf7\u5148\u4e0a\u4f20\u56fe\u7247")},isProcessing:j}),a&&(0,r.jsx)(p,{compressedImage:a,fileName:v,compressedSize:h,originalSize:o,compressionRatio:u})]})]}),(0,r.jsx)("canvas",{ref:I,style:{display:"none"}})]})};const x=function(){return(0,r.jsx)(l.A,{title:"\u56fe\u7247\u538b\u7f29\u5de5\u5177",children:(0,r.jsx)("div",{className:"container margin-vert--xl",children:(0,r.jsx)(h,{})})})}}}]);