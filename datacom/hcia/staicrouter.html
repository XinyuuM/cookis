<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-hcia" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">静态路由和默认路由的配置（remake） | 曦语</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xinyuu.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xinyuu.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xinyuu.cn/datacom/hcia/staicrouter"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="静态路由和默认路由的配置（remake） | 曦语"><meta data-rh="true" name="description" content="实验介绍"><meta data-rh="true" property="og:description" content="实验介绍"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-02-29T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://space.bilibili.com/21977351"><meta data-rh="true" property="article:tag" content="静态路由,默认路由"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xinyuu.cn/datacom/hcia/staicrouter"><link data-rh="true" rel="alternate" href="https://xinyuu.cn/datacom/hcia/staicrouter" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://xinyuu.cn/datacom/hcia/staicrouter" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://xinyuu.cn/datacom/hcia/staicrouter","mainEntityOfPage":"https://xinyuu.cn/datacom/hcia/staicrouter","url":"https://xinyuu.cn/datacom/hcia/staicrouter","headline":"静态路由和默认路由的配置（remake）","name":"静态路由和默认路由的配置（remake）","description":"实验介绍","datePublished":"2024-02-29T00:00:00.000Z","author":{"@type":"Person","name":"Allalone","description":"编辑","url":"https://space.bilibili.com/21977351","image":"https://static.cocomoe.cn/img/allalone-face.jpg"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://xinyuu.cn/datacom/hcia","name":"HCIA 笔记"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="曦语 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="曦语 Atom Feed">







<link rel="alternate" type="application/rss+xml" href="/datacom/hcia/rss.xml" title="曦语 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/datacom/hcia/atom.xml" title="曦语 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d8995f22.css">
<script src="/assets/js/runtime~main.449b4d91.js" defer="defer"></script>
<script src="/assets/js/main.fb2d35be.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="https://static.cocomoe.cn/img/allalone-face.jpg"><link rel="preload" as="image" href="/img/badge-netlify.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Auroral" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Auroral" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">曦语</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">所有HCIA文章</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/datacom/hcia/kkjcnwudgusa">配置前缀列表</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/datacom/hcia/cc46346ss669dkv">配置高级的访问控制列表</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/datacom/hcia/ccbnviruqss669dkv">配置基本的访问控制列表</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/datacom/hcia/dsadsf5jfgh">配置VRRP多备份组</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/datacom/hcia/mmu870hhcd">配置RIPv2的认证</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">静态路由和默认路由的配置（remake）</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-02-29T00:00:00.000Z">2024年2月29日</time> · <!-- -->阅读需 10 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://static.cocomoe.cn/img/allalone-face.jpg" alt="Allalone"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://space.bilibili.com/21977351" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp" translate="no">Allalone</span></a></div><small class="authorTitle_nd0D" title="编辑">编辑</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="实验介绍">实验介绍<a href="#实验介绍" class="hash-link" aria-label="实验介绍的直接链接" title="实验介绍的直接链接" translate="no">​</a></h2>
<p><strong>静态路由和默认路由</strong></p>
<p>静态路由和默认路由都是路由协议的一种，它们在计算机网络中用于决定数据包的传输路径。</p>
<p>静态路由是由网络管理员手动配置的路由规则，它不会改变。静态路由会告诉路由器如何将数据包从一个网络转发到另一个网络。</p>
<p>默认路由是一种特殊的静态路由，它指定了一个路由器作为默认路由，即当数据包没有指定目标网络时，路由器将使用默认路由来转发数据包。默认路由有助于优化路由器的性能和网络带宽的使用，因为它可以将数据包发送到最合适的目标网络，而不需要经过更多的路由查找过程。</p>
<p>因此，静态路由和默认路由在计算机网络中通常一起使用，以实现更高效的数据包转发和网络连接。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="实验目的">实验目的<a href="#实验目的" class="hash-link" aria-label="实验目的的直接链接" title="实验目的的直接链接" translate="no">​</a></h3>
<ul>
<li class="">掌握配置静态路由(指定下一跳IP 地址)的方法</li>
<li class="">掌握配置静态路由(指定接口)的方法</li>
<li class="">掌握测试静态路由连通性的方法</li>
<li class="">掌握配置默认路由的方法</li>
<li class="">掌握测试默认路由的方法</li>
<li class="">掌握在简单网络中部署静态路由时的故障排除方法</li>
<li class="">掌握简单的网络优化方法</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="实验内容">实验内容<a href="#实验内容" class="hash-link" aria-label="实验内容的直接链接" title="实验内容的直接链接" translate="no">​</a></h3>
<p>在由3台路由器所组成的简单网络中，R1与R3各自连接着一台主机，现在要求能够实现主机PC-1与PC-2之间的正常通信。本实验将通过配</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="实验拓扑">实验拓扑<a href="#实验拓扑" class="hash-link" aria-label="实验拓扑的直接链接" title="实验拓扑的直接链接" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/1.webp" alt="1.webp" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="实验编址">实验编址<a href="#实验编址" class="hash-link" aria-label="实验编址的直接链接" title="实验编址的直接链接" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/1709865465328-b75243656b747766bce3051be4e293d8.png" width="870" height="481" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="实验配置">实验配置<a href="#实验配置" class="hash-link" aria-label="实验配置的直接链接" title="实验配置的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="基本配置">基本配置<a href="#基本配置" class="hash-link" aria-label="基本配置的直接链接" title="基本配置的直接链接" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/2.webp" alt="2.webp" class="img_ev3q"></p>
<p>根据实验编址表进行相应的基本配置，并使用ping命令检测各直连链路的连通性。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r1]int g0/0/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r1-GigabitEthernet0/0/0]ip add 192.168.10.1 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r1]int s 1/0/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r1-Serial1/0/0]ip add 10.0.12.1 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r2]int s1/0/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r2-Serial1/0/1]ip add 10.0.12.2 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r2]int s1/0/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r2-Serial1/0/0]ip add 10.0.23.2 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3]int s1/0/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3-Serial1/0/1]ip add 10.0.23.3 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3]int g0/0/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3-GigabitEthernet0/0/0]ip add 192.168.20.3 24</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/3.webp" alt="3.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/4.webp" alt="4.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/5.webp" alt="5.webp" class="img_ev3q"></p>
<p>各直连链路间的IP连通性测试完成后，现尝试在主机PC-1上直接ping主机PC-2。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/6.webp" alt="6.webp" class="img_ev3q"></p>
<p>发现无法连通，这时需要思考是什么问题导致了它们之间无法通信。</p>
<p>首先假设主机PC-1与PC-2之间如果能够正常连通，那么主机A将发送数据给其网关设备R1;R1收到后将根据数据包中的目的地址查看它的路由表，找到相应的目的网络的所在路由条目，并根据该条目中的下一跳和出接口信息将该数据转发给下一台路由器R2;R2采取同样的步骤将数据转发给R3;最后R3也采取同样的步骤将数据转发给与自己直连的主机PC-2;主机PC-2在收到数据后，与主机PC-1发送数据到PC-2的过程一样，再发送相应的回应消息给PC-1。</p>
<p>在保证基本配置没有错误的情况下，首先查看主机PC-1与其网关设备R1间能否正常通信。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/7.webp" alt="7.webp" class="img_ev3q"></p>
<p>主机与网关之间通信正常，接下来检查网关设备R1上的路由表。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;r1&gt;display ip routing-table</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/8.webp" alt="8.webp" class="img_ev3q"></p>
<p>可以看到在R1的路由表上，没有任何关于主机PC-2所在网段的信息。可以使用同样的方式查看R2与R3的路由表</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/9.webp" alt="9.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/10.webp" alt="10.webp" class="img_ev3q"></p>
<p>可以看到在R2上没有任何关于主机PC-1和PC-2所在网段的信息，R3上没有任何关于主机PC-1所在网段的信息，验证了初始情况下各路由器的路由表上仅包括了与自身直接相连的网段的路由信息。</p>
<p>现在主机PC-1与PC-2之间跨越了若干个不同网段，要实现它们之间的通信，只通过简单的IP地址等基本配置是无法实现的，必须在3台路由器上添加相应的路由信息,可以通过配置静态路由来实现。</p>
<p>配置静态路由有两种方式，一种是在配置中采取指定下一跳IP地址的方式，另一种是指定出接口的方式。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="配置静态路由实现主机pc-1与pc-2之间的通信">配置静态路由(实现主机PC-1与PC-2之间的通信)<a href="#配置静态路由实现主机pc-1与pc-2之间的通信" class="hash-link" aria-label="配置静态路由(实现主机PC-1与PC-2之间的通信)的直接链接" title="配置静态路由(实现主机PC-1与PC-2之间的通信)的直接链接" translate="no">​</a></h3>
<p>在 R1 上配置目的网段为主机 PC-2所在网段的静态路由，即目的IP 地址为192.168.20.0，掩码为255.255.255.0。</p>
<p>对于R1而言，要发送数据到主机PC-2，则必须先发送给R2，所以R2即为R1的下一跳路由器，R2与R1所在的直连链路上的物理接口的IP地址即为下一跳IP地址，即10.0.12.2.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r1]ip route-static 192.168.20.0 24 10.0.12.2 </span><br></span></code></pre></div></div>
<p>配置完成后，查看R1上的路由表。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;r1&gt;display ip routing-table</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/11.webp" alt="11.webp" class="img_ev3q"></p>
<p>配置完成后，可以在R1的路由表上查看到主机PC-2所在网段的路由信息。</p>
<p>采取同样的方式在R2上配置目的网段为主机PC-2所在网段的静态路由。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r2]ip route-static 192.168.20.0 24 10.0.23.3</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;r2&gt;display ip routing-table</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/12.webp" alt="12.webp" class="img_ev3q"></p>
<p>在R3上配置目的网段为PC-1所在网段的静态路由，即目的IP地址为192.168.10.0，目的地址的掩码除了可以采用点分十进制的格式表示外，还可以直接使用掩码长度，即24来表示。</p>
<p>对于R3而言，要发送数据到PC-1，则必须先发送给R2，所以R3与R2所在直连链路上的物理接口S 0/0/1即为数据转发接口，也称为出接口，在配置中指定该接口即可。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r3]ip route-static 192.168.10.0 24 Serial 1/0/1</span><br></span></code></pre></div></div>
<p>采取同样的方式在R2上配置目的网段为PC-1所在网段的静态路由。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r2]ip route-static 192.168.10.0 24 Serial 1/0/1</span><br></span></code></pre></div></div>
<p>配置完成后，查看R1、R2、R3上的路由表。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/13.webp" alt="13.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/14.webp" alt="14.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/15.webp" alt="15.webp" class="img_ev3q"></p>
<p>可以看到，现在每台路由器上都拥有了主机PC-1与PC-2所在网段的路由信息。</p>
<p>再在主机PC-1上ping主机PC-2。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/16.webp" alt="16.webp" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="实现全网全通来增强网络的可靠性">实现全网全通来增强网络的可靠性<a href="#实现全网全通来增强网络的可靠性" class="hash-link" aria-label="实现全网全通来增强网络的可靠性的直接链接" title="实现全网全通来增强网络的可靠性的直接链接" translate="no">​</a></h3>
<p>经过上面的步骤，主机PC-1与PC-2之间已经能够正常通信。</p>
<p>假设此时网络突然出现故障，主机PC-1侧的网络管理员发现无法与PC-2正常通信，于是先测试与网关设备R1间的连通性。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/17.webp" alt="17.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/18.webp" alt="18.webp" class="img_ev3q"></p>
<p>发现无法与R3正常通信，这也意味着此时网络管理员将无法通过主机PC-1登录到R3上进一步排除故障，由此可见，保证全网的连通性能够增强整网的可靠性，提高网络的可维护性及健壮性。</p>
<p>发现无法与R3正常通信，这也意味着此时网络管理员将无法通过主机PC-1登录到R3上进一步排除故障，由此可见，保证全网的连通性能够增强整网的可靠性，提高网络的可维护性及健壮性。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r1]ip route-static  10.0.23.0 24 10.0.12.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3]ip route-static 10.0.12.0 24 Serial 1/0/1</span><br></span></code></pre></div></div>
<p>配置完成后，查看R1、R2、R3的路由表，注意观察新增的条目。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/19.webp" alt="19.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/20.webp" alt="20.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/21.webp" alt="21.webp" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/22.webp" alt="22.webp" class="img_ev3q"></p>
<p>测试成功，主机PC-1可以顺利与R3通信，同样主机PC-2此时也能够与R1进行通信，测试过程这里省略。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用默认路由实现简单的网络优化">使用默认路由实现简单的网络优化<a href="#使用默认路由实现简单的网络优化" class="hash-link" aria-label="使用默认路由实现简单的网络优化的直接链接" title="使用默认路由实现简单的网络优化的直接链接" translate="no">​</a></h3>
<p>通过适当减少设备上的配置工作量，能够帮助网络管理员在进行故障排除时更轻松地定位故障，且相对较少的配置量也能减少在配置时出错的可能。</p>
<p>另一方面，也能够相对减少对设备本身硬件的负担。默认路由是一种特殊的静态路由，使用默认路由可以简化路由器上的配置。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/23.webp" alt="23.webp" class="img_ev3q"></p>
<p>此时 R1 上存在两条先前经过手动配置的静态路由条目，且它们的下一跳和出接口都一致。</p>
<p>现在在R1上配置一条默认路由，即目的网段和掩码为全0，表示任何网络，下一跳为10.0.12.2，并删除先前配置的两条静态路由。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r1]ip route-static 0.0.0.0 0 10.0.12.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r1]undo ip route-static 10.0.23.0 255.255.255.0 10.0.12.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r1]undo ip route-static 192.168.20.0 255.255.255.0 10.0.12.2</span><br></span></code></pre></div></div>
<p>配置完成后，查看R1的路由表</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/24.webp" alt="24.webp" class="img_ev3q"></p>
<p>再测试主机PC-1与PC-2间的通信</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/25.webp" alt="25.webp" class="img_ev3q"></p>
<p>发现主机PC-1与PC-2间的通信正常，证明使用默认路由不但能够实现与静态路由同样的效果，而且还能够减少配置量。在R3上可以进行同样的配置。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[r3]ip route-static 0.0.0.0 0 Serial 1/0/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3]undo ip route-static 10.0.12.0 255.255.255.0 Serial 1/0/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[r3]undo ip route-static 192.168.10.0 255.255.255.0 Serial 1/0/1</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/26.webp" alt="26.webp" class="img_ev3q"></p>
<p>再次测试主机PC-1与PC-2间的通信。</p>
<p><img decoding="async" loading="lazy" src="https://static.cocomoe.cn/static/hcialab/2024229/27.webp" alt="27.webp" class="img_ev3q"></p>
<p>主机PC-1与PC-2间的通信正常。</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="end">END.<a href="#end" class="hash-link" aria-label="END.的直接链接" title="END.的直接链接" translate="no">​</a></h2></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/datacom/hcia/tags/静态路由">静态路由</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/datacom/hcia/tags/默认路由">默认路由</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/datacom/hcia/oshwut8eb7a94y4s"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">OSPF多区域的配置</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/datacom/hcia/eth-trunk"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">配置Eth-Trunk 链路聚合</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#实验介绍" class="table-of-contents__link toc-highlight">实验介绍</a><ul><li><a href="#实验目的" class="table-of-contents__link toc-highlight">实验目的</a></li><li><a href="#实验内容" class="table-of-contents__link toc-highlight">实验内容</a></li><li><a href="#实验拓扑" class="table-of-contents__link toc-highlight">实验拓扑</a></li><li><a href="#实验编址" class="table-of-contents__link toc-highlight">实验编址</a></li></ul></li><li><a href="#实验配置" class="table-of-contents__link toc-highlight">实验配置</a><ul><li><a href="#基本配置" class="table-of-contents__link toc-highlight">基本配置</a></li><li><a href="#配置静态路由实现主机pc-1与pc-2之间的通信" class="table-of-contents__link toc-highlight">配置静态路由(实现主机PC-1与PC-2之间的通信)</a></li><li><a href="#实现全网全通来增强网络的可靠性" class="table-of-contents__link toc-highlight">实现全网全通来增强网络的可靠性</a></li><li><a href="#使用默认路由实现简单的网络优化" class="table-of-contents__link toc-highlight">使用默认路由实现简单的网络优化</a></li></ul></li><li><a href="#end" class="table-of-contents__link toc-highlight">END.</a></li></ul></div></div></div></div></div><footer class="custom-footer-container"><div class="custom-footer-card"><div class="custom-footer-content"><div class="footer-section"><h3 class="footer-section-title">友情链接</h3><ul class="footer-links-list"></ul></div><div class="footer-section"><h3 class="footer-section-title">快速导航</h3><ul class="footer-links-list"><li><a class="footer-link" href="/legacy">关于曦语</a></li><li><a class="footer-link" href="/love"> 我们的故事</a></li></ul></div><div class="footer-section"><h3 class="footer-section-title">法律信息</h3><p class="footer-copyright">©2021-<!-- -->2025<!-- --> <!-- -->Xinyuu<!-- -->. All rights reserved.</p><p class="footer-beian"><a href="https://icp.gov.moe/?keyword=20250737" target="_blank" rel="noopener noreferrer" class="footer-beian-link">萌ICP备20250737号</a></p><p class="footer-tech">Built with❤ <a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer">Docusaurus</a>.</p><img src="/img/badge-netlify.svg" alt="Deploys by Netlify" width="114" height="51"></div></div></div></footer></div>
</body>
</html>